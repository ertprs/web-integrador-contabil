<div class="main-wrapper pt-4">
  <form *ngIf="entry" autocomplete="off">
    <!-- <app-card> -->
    <!-- <app-card> -->

    <app-card main="true">
      <div class="row m-0 mb-2" *ngIf="entry.fornecedor || entry.banco">
        <app-chips
          title="Fornecedor"
          [property]="entry.fornecedor"
          class="col"
          *ngIf="entry.fornecedor"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
        <app-chips
          title="Banco"
          [property]="entry.banco"
          class="col"
          *ngIf="entry.banco"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
      </div>

      <div
        class="row m-0 mb-2"
        *ngIf="entry.data || entry.valor || entry.documento"
      >
        <app-chips
          title="Data"
          [property]="entry.data"
          class="col"
          *ngIf="entry.data"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
        <app-chips
          title="Valor"
          [property]="entry.valor"
          class="col"
          *ngIf="entry.valor"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
        <app-chips
          title="Documento"
          [property]="entry.documento"
          class="col"
          *ngIf="entry.documento"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
      </div>

      <div class="row m-0 mb-2" *ngIf="entry.nomeArquivo || entry.tipoPlanilha">
        <app-chips
          title="Nome do Arquivo"
          [property]="entry.nomeArquivo"
          class="col"
          *ngIf="entry.nomeArquivo"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
        <app-chips
          title="Tipo da Planilha"
          [property]="entry.tipoPlanilha"
          class="col"
          *ngIf="entry.tipoPlanilha"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
      </div>

      <div class="row m-0 mb-2" *ngIf="entry.complemento01">
        <app-chips
          title="Complemento 1"
          [property]="entry.complemento01"
          class="col"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
      </div>

      <div
        class="row m-0 mb-2"
        *ngIf="entry.complemento02 || entry.complemento03"
      >
        <app-chips
          title="Complemento 2"
          [property]="entry.complemento02"
          class="col"
          *ngIf="entry.complemento02"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
        <app-chips
          title="Complemento 3"
          [property]="entry.complemento03"
          class="col"
          *ngIf="entry.complemento03"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
      </div>

      <div
        class="row m-0 mb-2"
        *ngIf="entry.complemento04 || entry.complemento05"
      >
        <app-chips
          title="Complemento 4"
          [property]="entry.complemento04"
          class="col"
          *ngIf="entry.complemento04"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
        <app-chips
          title="Complemento 5"
          [property]="entry.complemento05"
          class="col"
          *ngIf="entry.complemento05"
          (selectedInfos)="onDevolve($event)"
        ></app-chips>
      </div>
    </app-card>
    <!-- </app-card> -->
    <!-- </app-card> -->

    <div class="row mt-2 p-2" *ngIf="!ruleSelected; else ris">
      <div class="col-8 p-3">
        <p
          class="text-warning"
          [matTooltip]="info.affecteds"
          matTooltipShowDelay="300"
          matTooltipHideDelay="500"
        >
          Esta regra afetará
          <span class="text-danger">{{ affecteds() }}</span>
          lançamentos.
        </p>
      </div>
      <div class="col-4">
        <input
          type="button"
          class="btn btn-outline-primary col mx-2"
          value="Ok"
          (click)="activate()"
          [matTooltip]="info.ok"
          matTooltipShowDelay="300"
          matTooltipHideDelay="500"
        />
        <input
          type="button"
          class="btn btn-outline-info col mx-2"
          value="Pular"
          (click)="pular()"
          [matTooltip]="info.skip"
          matTooltipShowDelay="300"
          matTooltipHideDelay="500"
        />
      </div>
    </div>

    <ng-template #ris>
      <div class="row mt-2 field">
        <!-- <ott-tinfo titulo="Conta" [valor]="entry.conta" ativado="true" class="col-6"></ott-tinfo> -->
        <div class="form-group col-4">
          <strong
            class="account-field"
            [matTooltip]="info.account"
            matTooltipShowDelay="300"
            matTooltipHideDelay="500"
            >Conta:</strong
          >
          <input
            list="suggestions"
            type="text"
            [(ngModel)]="conta"
            name="conta"
            [matTooltip]="info.account"
            matTooltipShowDelay="300"
            matTooltipHideDelay="500"
          />
          <datalist id="suggestions">
            <option
              *ngFor="let suggestion of suggestions"
              [value]="suggestion"
            ></option>
          </datalist>
        </div>

        <div class="col-8">
          <div class="row w-100 m-0">
            <input
              type="button"
              class="btn btn-outline-info col mx-2"
              value="Salvar regra"
              (click)="regra()"
              [matTooltip]="info.rule"
              matTooltipShowDelay="300"
              matTooltipHideDelay="500"
            />
            <input
              type="button"
              class="btn btn-outline-info col mx-2"
              value="Ignorar"
              (click)="ignorar()"
              [matTooltip]="info.ignore"
              matTooltipShowDelay="300"
              matTooltipHideDelay="500"
            />
            <input
              type="button"
              class="btn btn-outline-info col mx-2"
              value="Cancelar"
              (click)="ruleSelected = false"
              [matTooltip]="info.cancel"
              matTooltipShowDelay="300"
              matTooltipHideDelay="500"
            />
          </div>
        </div>
      </div>
    </ng-template>
  </form>
</div>
